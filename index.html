
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Food Tracker</title>
	<style>
	</style>
  </head>
  <body>
        <nav class="uk-navbar-container uk-margin" uk-navbar>
                <div class="uk-navbar-center">
                     <i class="fa fa-diamond" style="font-size:36px"></i>
                    <a class="uk-navbar-item uk-logo" href="index.html" >Food Tracker</a>
                </div>
            </nav> 
    <div class="container">
        
      
        <div class="uk-card uk-card-default uk-card-body uk-width-1-2@m uk-align-center">
               <!-- <center><h3 class="uk-card-title">Verify your Order</h3></center>
                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <a class="uk-form-icon" href="#" uk-icon="icon: pencil"></a>
                        <input class="uk-input" type="text" id="batchcode">
                    </div>
                </div>
                            
                            
                <button class="uk-button uk-button-default uk-width-1-1" id="insertdata">Search</button>-->
        </div>
        <div class="uk-card uk-card-default uk-card-body uk-width-1-2@m uk-align-center">
                <center><h3 class="uk-card-title">Life Cycle</h3></center>
                <table class="uk-table uk-table-middle uk-table-divider">
                        <thead>
                            <tr>
                                <th>Stakeholder</th>
                                <th>Name</th>
                                <th>Status</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Farmer</td>
                                <td id="m1">Uttarashi</td>
                                <td id="m2">Approved</td>
                                <td id="m3"><script>n=new Date();
				k=formatDate(Date.now())
                                document.getElementById("m3").innerHTML=k;</script></td>
                            </tr>
                            <tr>
                                <td>Collection Point</td>
                                <td id="c1">Dehradun</td>
                                <td id="c2">Approved</td>
                                <td id="c3"><script>
                                document.getElementById("c3").innerHTML=Date.now();</script></td>
                            </tr>
                            <tr>
                                <td>Check Point</td>
                                <td id="d1">Valayar</td>
                                <td id="d2">Approved</td>
                                <td id="d3"><script>
                                document.getElementById("d3").innerHTML=Date.now();</script></td>
                            </tr>
                            <tr>
                                <td>Merchant</td>
                                <td id="s1">Farm fresh</td>
                                <td id="s2">Approved</td>
                                <td id="s3"><script>
                                document.getElementById("s3").innerHTML=Date.now();</script></td>
                            </tr>
                        </tbody>
                    </table>
             <center><button class="uk-button uk-button-default uk-width-1-1" style="background-color:red;color:white;"  id="salesforceButton" style="visibility:hidden" onclick="window.location.href = 'https://fdbotdemo.lightning.force.com/lightning/o/Case/new?nooverride=1&useRecordTypeCheck=1&navigationLocation=LIST_VIEW&backgroundContext=%2Flightning%2Fpage%2Fhome';">Raise Ticket</button></center>
             <center><button class="uk-button uk-button-default uk-width-1-1" style="background-color:honeydew;">Track Info</button></center>
	     <center><a href = 'maps.html'> <button class="uk-button uk-button-default uk-width-1-1" style="background-color:honeydew; ">Show maps</button></a></center>
             <center><button class="uk-button uk-button-default uk-width-1-1" style="background-color:green;color:white;" id="mapButton" style="visibility:show" onclick="window.location.href = 'maps.html';">Map</button></center>
	    </div>
        <!-- <div class="uk-position-center">
            <div class="uk-card uk-card-default uk-card-body uk-align-center">
                <h3 class="uk-card-title">Welcome to Medico</h3>
                <p>Verify your Medicine</p>
                
                <p>

                <div class="uk-margin">
                    <div class="uk-inline">
                        <a class="uk-form-icon" href="#" uk-icon="icon: pencil"></a>
                        <input class="uk-input" type="text" id="batchcode">
                    </div>
                </div>
                            
                            
                <button class="uk-button uk-button-default uk-width-1-1" id="insertdata">Search</button>
                    
                </p>
            </div>
            
        </div> -->
       
                    
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.3/css/uikit.min.css" />

<!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.3/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.3/js/uikit-icons.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
    $(document).ready(function(){
	/*var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	console.log("variables:");
	console.log(hashes)
	var ids=hashes[0].split('=')[1]
	console.log("ids");
	console.log(ids);
	document.getElementById('batchcode').value=ids;*/

		document.getElementById('mapButton').style.visibility='hidden';
		document.getElementById('salesforceButton').style.visibility='hidden';


        $("#insertdata").click(function(){
            var batchcode = $("#batchcode").val();
            console.log(batchcode);
            if(batchcode == ""){
                UIkit.notification({
                    message: 'Field cannot be empty!',
                    status: 'primary',
                    pos: 'bottom-center',
                    timeout: 5000
                });
            }
            else{
                UIkit.notification({
                        message: 'Please Wait, Searching record.',
                        status: 'primary',
                        pos: 'top-center',
                        timeout: 5000
                });
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    //"url": "http://ec2-3-14-245-247.us-east-2.compute.amazonaws.com:4000/transactionHistory/"+batchcode,
		url:"http://52.1.79.43:8005/transaction?id="+batchcode,
                    "method": "GET",
                    "headers": {
                        "cache-control": "no-cache",
			"Access-Control-Allow-Origin":"*",
			"Access-Control-Allow-Methods":"GET,POST,PUT,OPTIONS",
			"Access-Control-Allow-Credentials":"true"
                    }
                }

                $.ajax(settings).done(function (response) {
                    console.log(response);
		response=JSON.parse(response);
console.log(response[1]['Value']['ReceiverName']);
                    //if(response.seller1stagenum != "string"){
                        $("#m1").html(response[1]['Value']['ReceiverName']);
                        $("#m2").html(response[1]['Value']['StatusDesc']);
                        $("#m3").html(response[1]['Timestamp']);
                        //if(response.seller2stagenum != "string"){
                            $("#d1").html(response[2]['Value']['ReceiverName']);
                            $("#d2").html(response[2]['Value']['StatusDesc']);
                            $("#d3").html(response[2]['Timestamp']);
                            //if(response.seller3stagenum != "string"){
                                $("#s1").html(response[3]['Value']['ReceiverName']);
                                $("#s2").html(response[3]['Value']['StatusDesc']);
                                $("#s3").html(response[3]['Timestamp']); 
                                    
                            //}    
                        //}  
                   // }
		if(response[1]['Value']['StatusDesc']=='Not Approved' || response[2]['Value']['StatusDesc']=='Not Approved'||response[3]['Value']['StatusDesc']=='Not Approved')
		{

		console.log("show salesforce");
		alert("The Diamond is Fake");
		document.getElementById('mapButton').style.visibility='hidden';
		document.getElementById('salesforceButton').style.visibility='visible';

		}
		else
		{
			console.log("show map");
			alert("The Diamond is Genuine");
		document.getElementById('salesforceButton').style.visibility='hidden';
		document.getElementById('mapButton').style.visibility='visible';



		}
                });
            }
        });
    });
    </script>
<script>
	function formatDate(date) {
  var monthNames = [
    "January", "February", "March",
    "April", "May", "June", "July",
    "August", "September", "October",
    "November", "December"
  ];

  var day = date.getDate();
  var monthIndex = date.getMonth();
  var year = date.getFullYear();

  return day + ' ' + monthNames[monthIndex] + ' ' + year;
}
	  </script>
  </body>
</html>

